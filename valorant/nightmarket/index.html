<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Night.Market</title>
    <style>
        @font-face {
            font-family: 'DINNextW1G-Regular';
            src: url('nightmarket/fonts/DINNextW1G-Regular.otf') format('truetype');
        }
        body {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            background: url('nightmarket/images/background.jpg') no-repeat center center fixed;
            background-size: cover;
            font-family: 'DINNextW1G-Regular', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            height: 100vh;
            color: #ffffff;
        }

        .night-market {
            text-align: center;
            background: rgba(0, 0, 0, 0.7);
            padding: 20px;
            border-radius: 10px;
            width: 90%;
            max-width: 1920px;
            margin: 20px;
        }

        h1 {
            margin-bottom: 20px;
            font-size: 2em;
        }

        #market-status {
            margin-bottom: 20px;
            font-size: 1.2em;
        }

        .cards-container {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .card {
            width: 175px;
            height: 300px;
            border-radius: 10px;
            position: relative;
            cursor: pointer;
            transition: transform 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 10px;
            text-align: center;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            border: 3px solid transparent; /* Kontur karty, początkowo przezroczysty */
            background-color: darkgray; /* Initial cover color */
        }

        .card::before {
            content: "";
            position: absolute;
            top: 50%;
            left: 50%;
            width: 60px; /* Rozmiar rombu */
            height: 60px; /* Rozmiar rombu */
            background: transparent;
            border: 2px solid currentColor; /* Kolor rombu zależny od rzadkości */
            transform: translate(-50%, -50%) rotate(45deg);
            z-index: 1;
        }

        .card::after {
            content: "";
            position: absolute;
            top: 50%;
            left: 50%;
            width: 100%; /* Szerokość pseudoelementu */
            height: 100%; /* Wysokość pseudoelementu */
            background: repeating-linear-gradient(
                45deg,
                transparent,
                transparent 20px,
                #808080 20px,
                #808080 22px
            );
            z-index: 0;
            transform: translate(-50%, -50%) rotate(45deg);
            opacity: 0.3; /* Przezroczystość wzoru */
            pointer-events: none; /* Umożliwia klikanie przez wzór */
        }

        .card img {
            max-width: 100%;
            border-radius: 5px;
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(45deg);
            z-index: 2;
        }

        .card:hover {
            transform: scale(1.05);
        }

        .card.revealed {
            background-color: transparent;
        }

        .card.revealed img,
        .card.revealed .info,
        .card.revealed .discount,
        .card.revealed .original-price,
        .card.revealed .discounted-price,
        .card.revealed .skin-name,
        .card.revealed .rarity-icon {
            display: block;
        }

        .skin-name {
            position: absolute;
            bottom: 10px;
            left: 10px;
            font-size: 1em;
            color: #ffffff; /* Kolor tekstu */
            z-index: 2;
        }

        .rarity-icon {
            position: absolute;
            bottom: 10px;
            right: 10px;
            font-size: 1.2em;
            color: #ffffff; /* Kolor ikonki */
            z-index: 2;
        }

        .discount {
            position: absolute;
            top: 10px;
            left: 10px;
            color: #ff6161;
            background: rgba(0, 0, 0, 0.7);
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.9em;
        }

        .original-price {
            position: absolute;
            top: 10px;
            right: 10px;
            color: #ff6161;
            text-decoration: line-through;
            font-size: 0.9em;
        }

        .discounted-price {
            position: absolute;
            top: 30px;
            right: 10px;
            color: white;
            font-size: 1em;
        }

        .card.select {
            background-color: #000; /* Kontur karty */
            border-color: #5a9fe2; /* Kontur rombu */
        }

        .card.deluxe {
            background-color: #000; /* Kontur karty */
            border-color: #009587; /* Kontur rombu */
        }

        .card.premium {
            background-color: #000; /* Kontur karty */
            border-color: #d1548d; /* Kontur rombu */
        }

        .card.exclusive {
            background-color: #000; /* Kontur karty */
            border-color: #f1b82d; /* Kontur rombu */
        }

        .card.ultra {
            background-color: #000; /* Kontur karty */
            border-color: #f1b82d; /* Kontur rombu */
        }

        /* Media queries for mobile */
        @media (max-width: 768px) {
            .card {
                width: 150px;
                height: 250px;
                padding: 5px;
            }

            .original-price {
                font-size: 0.8em;
            }

            .discounted-price {
                font-size: 0.9em;
                top: 25px;
            }

            .discount {
                font-size: 0.8em;
            }
        }

        .diamond-animation {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 60px; /* Initial size */
    height: 60px; /* Initial size */
    background: transparent;
    border: 2px solid white; /* Color of the diamond */
    transform: translate(-50%, -50%) rotate(45deg);
    z-index: 3;
    opacity: 1; /* Ensure it's visible */
    animation: none; /* No initial animation */
}

@keyframes shrinkAndEnlargeDiamond {
    0% {
        width: 60px;
        height: 60px;
        opacity: 1;
    }
    50% {
        width: 0;
        height: 0;
        opacity: 0.5;
    }
    100% {
        width: 60px;
        height: 60px;
        opacity: 0;
    }
}

.card .diamond-animation.hidden {
    opacity: 0;
}



    </style>
</head>
<body>
    <div class="night-market">
        <h1>NIGHT.MARKET</h1>
        <p id="market-status"><strong></strong></p>
        <div class="cards-container" id="cards-container"></div>
    </div>
    <script>
        const skins = [
            { name: "Reaver Knife", rarity: "Exclusive", price: 3550, image: "nightmarket/images/reaver-knife.png" },
            { name: "Magepunk Guardian", rarity: "Premium", price: 1775, image: "magepunk_guardian.jpg" },
            { name: "Ion Operator", rarity: "Premium", price: 1775, image: "ion_operator.jpg" },
            { name: "Minima Sheriff", rarity: "Deluxe", price: 1275, image: "minima_sheriff.jpg" },
            { name: "Rush Judge", rarity: "Select", price: 875, image: "oni_shorty.jpg" },
            { name: "Ego Vandal", rarity: "Premium", price: 1775, image: "ego_vandal.jpg" }
        ];

        const discounts = [10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49];

        function getRandomElement(arr) {
            return arr[Math.floor(Math.random() * arr.length)];
        }

        function calculateDiscountPrice(price, discount) {
            return Math.floor(price * ((100 - discount) / 100));
        }

        function updateMarketStatus() {
            const marketStatusElement = document.getElementById("market-status");
            const now = new Date();
            const marketStart = new Date(now.getFullYear(), now.getMonth(), now.getDate() - now.getDay() + 5); // Najbliższy czwartek
            const marketEnd = new Date(marketStart);
            marketEnd.setDate(marketEnd.getDate() + 14);

            if (now < marketStart) {
                const daysUntilStart = Math.ceil((marketStart - now) / (1000 * 60 * 60 * 24));
                marketStatusElement.textContent = `STARTS IN ${daysUntilStart} DAYS`;
            } else if (now >= marketStart && now <= marketEnd) {
                const daysUntilEnd = Math.ceil((marketEnd - now) / (1000 * 60 * 60 * 24));
                marketStatusElement.textContent = `ENDS IN ${daysUntilEnd} DAYS`;
            } else {
                const daysUntilNextStart = Math.ceil((marketStart.setDate(marketStart.getDate() + 7) - now) / (1000 * 60 * 60 * 24));
                marketStatusElement.textContent = `STARTS IN ${daysUntilNextStart} DAYS`;
            }
        }

        const rarityImages = {
        Select: url('nightmarket/images/select.png'),
        Deluxe: url('nightmarket/images/deluxe.png'),
        Premium: url('nightmarket/images/premium.png'),
        Exclusive: url('nightmarket/images/exclusive.png'),
        Ultra: url('nightmarket/images/ultra.png')
    };

        function createCard(skin) {
    const card = document.createElement("div");
    card.classList.add("card", skin.rarity.toLowerCase());

    const discount = getRandomElement(discounts);
    const discountedPrice = calculateDiscountPrice(skin.price, discount);

    card.innerHTML = `
        <div class="discount">-${discount}%</div>
        <div class="original-price">${skin.price}</div>
        <div class="discounted-price">${discountedPrice} VP</div>
        <div class="info">
            Rzadkość: ${skin.rarity}
        </div>
        <div class="skin-details">
            <img src="${skin.image}" alt="${skin.name}">
            <div class="skin-name">${skin.name}</div>
        </div>
        <div class="rarity-icon"><img src="${rarityImages[skin.rarity]}" alt="${skin.rarity} icon"></div>
        <div class="diamond-animation"></div> <!-- Existing diamond -->
    `;

    card.addEventListener("click", () => {
        const diamondAnimation = card.querySelector('.diamond-animation');
        diamondAnimation.style.animation = "shrinkAndEnlargeDiamond 2s forwards";
        setTimeout(() => {
            card.classList.add("revealed");
            diamondAnimation.classList.add("hidden"); // Hide the diamond after animation
        }, 2000);
    });

    return card;
}




        function populateMarket() {
            const cardsContainer = document.getElementById("cards-container");
            skins.forEach(skin => {
                const card = createCard(skin);
                cardsContainer.appendChild(card);
            });
        }

        updateMarketStatus();
        populateMarket();
    </script>
</body>
</html>
